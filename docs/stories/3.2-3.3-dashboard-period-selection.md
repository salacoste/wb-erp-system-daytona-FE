# Dashboard: –ü–µ—Ä–∏–æ–¥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**–î–∞—Ç–∞:** 2025-11-21  
**Stories:** 3.2 (Key Metric Cards Display), 3.3 (Expense Breakdown Visualization)

---

## üìÖ –¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### –ü–µ—Ä–∏–æ–¥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**Dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞ —Å–∞–º—É—é –Ω–æ–≤—É—é (–ø–æ—Å–ª–µ–¥–Ω—é—é) –Ω–µ–¥–µ–ª—é** –∏–∑ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –Ω–µ–¥–µ–ª—å.

### –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –Ω–µ–¥–µ–ª–∏

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –Ω–µ–¥–µ–ª—å:**
   - Endpoint: `GET /v1/analytics/weekly/available-weeks`
   - Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–¥–µ–ª–∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–æ —É–±—ã–≤–∞–Ω–∏—é (`ORDER BY week DESC`)
   - –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞: `{ data: [{ week: "2025-W46", start_date: "2025-11-09" }, ...] }`

2. **–í—ã–±–æ—Ä –Ω–µ–¥–µ–ª–∏:**
   - Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–ø–µ—Ä–≤—É—é –Ω–µ–¥–µ–ª—é –∏–∑ –º–∞—Å—Å–∏–≤–∞** (`weeks[0]`)
   - –¢–∞–∫ –∫–∞–∫ backend —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ —É–±—ã–≤–∞–Ω–∏—é, –ø–µ—Ä–≤–∞—è –Ω–µ–¥–µ–ª—è = —Å–∞–º–∞—è –Ω–æ–≤–∞—è

3. **–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
   - Endpoint: `GET /v1/analytics/weekly/finance-summary?week={latestWeek}`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—ã–±—Ä–∞–Ω–Ω–∞—è –Ω–µ–¥–µ–ª—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –∏ —Ä–∞—Å—Ö–æ–¥–æ–≤

### –ö–æ–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–§–∞–π–ª:** `src/hooks/useDashboard.ts` (—Å—Ç—Ä–æ–∫–∏ 49-74)

```typescript
// –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –Ω–µ–¥–µ–ª—å
const weeksResponse = await apiClient.get('/v1/analytics/weekly/available-weeks')
const weeks = weeksArray.map((w) => w.week)

// –í—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—É—é –Ω–µ–¥–µ–ª—é (—Å–∞–º—É—é –Ω–æ–≤—É—é)
const latestWeek = weeks[0]  // ‚Üê –°–∞–º–∞—è –Ω–æ–≤–∞—è –Ω–µ–¥–µ–ª—è

// –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∑–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é
const summaryResponse = await apiClient.get(
  `/v1/analytics/weekly/finance-summary?week=${latestWeek}`
)
```

**–§–∞–π–ª:** `src/hooks/useExpenses.ts` (—Å—Ç—Ä–æ–∫–∏ 33-60)

```typescript
// –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤
const latestWeek = weeks[0]  // ‚Üê –°–∞–º–∞—è –Ω–æ–≤–∞—è –Ω–µ–¥–µ–ª—è
const summaryResponse = await apiClient.get(
  `/v1/analytics/weekly/finance-summary?week=${latestWeek}`
)
```

---

## üìä –ü—Ä–∏–º–µ—Ä

### –¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î

–î–ª—è –∫–∞–±–∏–Ω–µ—Ç–∞ `f75836f7-c0bc-4b2c-823c-a1f3508cce8e` –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –Ω–µ–¥–µ–ª–∏ (–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —É–±—ã–≤–∞–Ω–∏—é):

| –ü–æ—Ä—è–¥–æ–∫ | –ù–µ–¥–µ–ª—è | –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ | –î–∞–Ω–Ω—ã–µ |
|---------|--------|-------------|--------|
| 1 | **2025-W46** | 2025-11-09 | ‚úÖ –ï—Å—Ç—å –¥–∞–Ω–Ω—ã–µ |
| 2 | 2025-W45 | 2025-11-02 | ‚úÖ –ï—Å—Ç—å –¥–∞–Ω–Ω—ã–µ |
| 3 | 2025-W44 | 2025-10-26 | ‚úÖ –ï—Å—Ç—å –¥–∞–Ω–Ω—ã–µ |
| 4 | 2025-W43 | 2025-10-19 | ‚úÖ –ï—Å—Ç—å –¥–∞–Ω–Ω—ã–µ |
| ... | ... | ... | ... |

### –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ UI

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é 2025-W46** (—Å–∞–º–∞—è –Ω–æ–≤–∞—è).

**–ú–µ—Ç—Ä–∏–∫–∏ (Story 3.2):**
- "–ö –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—é –∑–∞ —Ç–æ–≤–∞—Ä": `195 470,62 ‚ÇΩ` (–∏–∑ `to_pay_goods_total` –∑–∞ W46)
- "–í–∞–π–ª–¥–±–µ—Ä—Ä–∏–∑ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª –¢–æ–≤–∞—Ä": `0,00 ‚ÇΩ` (–∏–∑ `sale_gross_total` –∑–∞ W46)

**–†–∞—Å—Ö–æ–¥—ã (Story 3.3):**
- –õ–æ–≥–∏—Å—Ç–∏–∫–∞: `32 470,10 ‚ÇΩ` (–∏–∑ `logistics_cost_total` –∑–∞ W46)
- –•—Ä–∞–Ω–µ–Ω–∏–µ: `1 849,69 ‚ÇΩ` (–∏–∑ `storage_cost_total` –∑–∞ W46)

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

- **–ü—Ä–∏ —Ñ–æ–∫—É—Å–µ –æ–∫–Ω–∞:** `refetchOnWindowFocus: true` –≤ TanStack Query
- **Stale time:** 30 —Å–µ–∫—É–Ω–¥ (–¥–∞–Ω–Ω—ã–µ —Å—á–∏—Ç–∞—é—Ç—Å—è —Å–≤–µ–∂–∏–º–∏ 30 —Å–µ–∫—É–Ω–¥)
- **Cache time:** 5 –º–∏–Ω—É—Ç (–¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∫–µ—à–µ 5 –º–∏–Ω—É—Ç)

### –ö–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è

1. –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏/–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É –±—Ä–∞—É–∑–µ—Ä–∞
2. –ü—Ä–∏ —Ä—É—á–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (F5)
3. –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å" –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

1. –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –Ω–µ–¥–µ–ª—å
2. –í—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–µ—Ä–≤–∞—è –Ω–µ–¥–µ–ª—è (—Å–∞–º–∞—è –Ω–æ–≤–∞—è)
3. –ï—Å–ª–∏ –ø–æ—è–≤–∏–ª–∞—Å—å –Ω–æ–≤–∞—è –Ω–µ–¥–µ–ª—è, –æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π
4. –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –¥–ª—è –Ω–æ–≤–æ–π –Ω–µ–¥–µ–ª–∏

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 1. –ù–µ—Ç –≤—ã–±–æ—Ä–∞ –ø–µ—Ä–∏–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å **–Ω–µ –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å** –ø–µ—Ä–∏–æ–¥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚ùå –í—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–∞–º–∞—è –Ω–æ–≤–∞—è –Ω–µ–¥–µ–ª—è
- ‚ùå –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞ –¥—Ä—É–≥–∏–µ –Ω–µ–¥–µ–ª–∏

### 2. –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –Ω–µ–¥–µ–ª—å

–ï—Å–ª–∏ `available-weeks` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤:
- –ú–µ—Ç—Ä–∏–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö")
- –†–∞—Å—Ö–æ–¥—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö)
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –µ—â–µ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã

### 3. –ì–∞—Ä–∞–Ω—Ç–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö (Story 2.7)

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è Story 2.7:
- ‚úÖ –ï—Å–ª–∏ –Ω–µ–¥–µ–ª—è –µ—Å—Ç—å –≤ —Å–ø–∏—Å–∫–µ `available-weeks`, –¥–∞–Ω–Ω—ã–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `finance-summary`
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- ‚úÖ Race condition —É—Å—Ç—Ä–∞–Ω–µ–Ω

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –±—É–¥—É—â–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π

### Story 3.4: Trend Graphs for Key Metrics

Story 3.4 –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ —Ç—Ä–µ–Ω–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫–∞–∂—É—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–¥–µ–ª—å. –≠—Ç–æ –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å:
- –í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4, 8, 12 –Ω–µ–¥–µ–ª—å)
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤
- –ì—Ä–∞—Ñ–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –≤–æ –≤—Ä–µ–º–µ–Ω–∏

### Story 3.5: Financial Summary View

Story 3.5 –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å:
- –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –Ω–µ–¥–µ–ª—é
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ –Ω–µ–¥–µ–ª–∏ –∏–∑ —Å–ø–∏—Å–∫–∞
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ –ø–µ—Ä–∏–æ–¥–∞–º–∏

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–î–æ–±–∞–≤–∏—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä –Ω–µ–¥–µ–ª–∏:**
   - Dropdown —Å –≤—ã–±–æ—Ä–æ–º –Ω–µ–¥–µ–ª–∏
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: —Å–∞–º–∞—è –Ω–æ–≤–∞—è –Ω–µ–¥–µ–ª—è
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –≤ localStorage

2. **–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–µ—Ä–∏–æ–¥ –≤ UI:**
   - –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –Ω–µ–¥–µ–ª—é –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ dashboard
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞ –Ω–µ–¥–µ–ª–∏

3. **–ö–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å":**
   - –Ø–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

---

## ‚úÖ –ò—Ç–æ–≥

**–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- ‚úÖ Dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞ **—Å–∞–º—É—é –Ω–æ–≤—É—é –Ω–µ–¥–µ–ª—é** –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –æ–∫–Ω–∞
- ‚úÖ –ï—Å–ª–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–∞—è –Ω–µ–¥–µ–ª—è, –æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π –ø–µ—Ä–∏–æ–¥ (–æ–∂–∏–¥–∞–µ—Ç—Å—è –≤ –±—É–¥—É—â–∏—Ö stories)

**–ü—Ä–∏–º–µ—Ä:**
- –ï—Å–ª–∏ –≤ –ë–î –µ—Å—Ç—å –Ω–µ–¥–µ–ª–∏: W46, W45, W44, W43, ...
- Dashboard –ø–æ–∫–∞–∂–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞ **W46** (—Å–∞–º–∞—è –Ω–æ–≤–∞—è)

---

**–î–∞—Ç–∞:** 2025-11-21  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ**

