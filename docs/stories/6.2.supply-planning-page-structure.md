# Story 6.2: Supply Planning Page Structure & Risk Dashboard

## Status
âœ… Ready for QA

---

## Story

**As a** seller,
**I want** a dedicated Supply Planning page with risk summary dashboard,
**so that** I can quickly see which products are at risk of stockout.

---

## Acceptance Criteria

### Functional Requirements

1. **Page Route**: `/analytics/supply-planning` accessible from navigation
2. **Planning Horizon Selector**: Dropdown with 7, 14, 30, 60 days (default: 30)
3. **Risk Summary Cards**: 5 cards showing counts by status:
   - â¬› Out of Stock (stock=0): X SKUs â€” Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹ Ñ Ð½ÑƒÐ»ÐµÐ²Ñ‹Ð¼ Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ¾Ð¼
   - ðŸ”´ Critical (0-7 days): X SKUs, potential loss Yâ‚½
   - ðŸŸ  Warning (7-14 days): X SKUs, potential loss Yâ‚½
   - ðŸŸ¡ Low (14-30 days): X SKUs, potential loss Yâ‚½
   - ðŸŸ¢ Healthy (>30 days): X SKUs
4. **Total Metrics**: Show total potential loss and recommended capital
5. **Card Click Filter**: Clicking card filters table to that status
6. **Refresh Button**: Manual data refresh with "Last updated" timestamp
7. **Loading State**: Skeleton loader while fetching
8. **Empty State**: Message when no SKUs with stock data
9. **Error State**: User-friendly error on API failure

### Integration Requirements

10. Navigation link added to sidebar under "Analytics"
11. Uses data from Story 6.1 hook
12. Follows existing analytics page patterns

### Quality Requirements

13. Responsive design (desktop + tablet + mobile)
14. Accessibility: WCAG AA compliance
15. Performance: Cards render in <500ms

---

## Tasks / Subtasks

### Page Setup

- [ ] Create page route (AC: 1)
  - [ ] Create `src/app/(dashboard)/analytics/supply-planning/page.tsx`
  - [ ] Add page metadata (title, description)
  - [ ] Add to navigation sidebar

### Header Section

- [ ] Create header component (AC: 2, 6)
  - [ ] Page title "ÐŸÐ»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð¾ÑÑ‚Ð°Ð²Ð¾Ðº"
  - [ ] Planning horizon dropdown (7/14/30/60 days)
  - [ ] Refresh button with "ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾: X Ð¼Ð¸Ð½ Ð½Ð°Ð·Ð°Ð´"
  - [ ] Export CSV button (future)

### Risk Summary Dashboard

- [ ] Create risk cards component (AC: 3, 4, 5)
  - [ ] Create `src/components/custom/SupplyRiskCards.tsx`
  - [ ] 5 cards with status icon, count, potential loss (out_of_stock, critical, warning, low, healthy)
  - [ ] Total metrics bar below cards
  - [ ] Click handler to filter by status
  - [ ] Hover state and cursor pointer

### States

- [ ] Implement loading state (AC: 7)
  - [ ] Skeleton for 4 cards
  - [ ] Skeleton for total metrics

- [ ] Implement empty state (AC: 8)
  - [ ] Message: "ÐÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¾Ð± Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ°Ñ…"
  - [ ] Suggestion to check stock import

- [ ] Implement error state (AC: 9)
  - [ ] Error message with retry button

### Navigation

- [ ] Update navigation (AC: 10)
  - [ ] Add link to sidebar
  - [ ] Icon: `Package` (Lucide)
  - [ ] Label: "ÐŸÐ»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð¾ÑÑ‚Ð°Ð²Ð¾Ðº"
  - [ ] **Badge**: ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°Ñ‚ÑŒ ÐºÑ€Ð°ÑÐ½Ñ‹Ð¹ ÑÑ‡Ñ‘Ñ‚Ñ‡Ð¸Ðº ÐµÑÐ»Ð¸ `out_of_stock + critical > 0`
  - [ ] Badge Ñ†Ð²ÐµÑ‚: `bg-red-600 text-white`
  - [ ] Ð¡ÐºÑ€Ñ‹Ð²Ð°Ñ‚ÑŒ badge ÐµÑÐ»Ð¸ Ð²ÑÑ‘ Ð² Ð½Ð¾Ñ€Ð¼Ðµ

---

## Dev Notes

### Page Layout Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HEADER                                                                      â”‚
â”‚ ÐŸÐ»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð¾ÑÑ‚Ð°Ð²Ð¾Ðº              [30 Ð´Ð½ÐµÐ¹ â–¼] [ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ] [ðŸ“¥ CSV]      â”‚
â”‚                                              ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾: 5 Ð¼Ð¸Ð½ Ð½Ð°Ð·Ð°Ð´        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ RISK SUMMARY CARDS (5 ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐµÐº)                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚ â”‚ â¬› ÐÐµÑ‚ Ð² â”‚ â”‚ ðŸ”´ ÐšÑ€Ð¸Ñ‚. â”‚ â”‚ ðŸŸ  Ð’Ð½Ð¸Ð¼. â”‚ â”‚ ðŸŸ¡ ÐÐ¸Ð·Ðº. â”‚ â”‚ ðŸŸ¢ ÐÐ¾Ñ€Ð¼Ð° â”‚           â”‚
â”‚ â”‚ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ð¸  â”‚ â”‚ (0-7 Ð´Ð½) â”‚ â”‚ (7-14Ð´Ð½) â”‚ â”‚(14-30Ð´Ð½) â”‚ â”‚ (>30 Ð´Ð½) â”‚           â”‚
â”‚ â”‚ 3 SKU    â”‚ â”‚ 5 SKU    â”‚ â”‚ 12 SKU   â”‚ â”‚ 20 SKU   â”‚ â”‚ 63 SKU   â”‚           â”‚
â”‚ â”‚          â”‚ â”‚ 125,000â‚½ â”‚ â”‚ 180,000â‚½ â”‚ â”‚ 220,000â‚½ â”‚ â”‚          â”‚           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                             â”‚
â”‚ ÐžÐ±Ñ‰Ð¸Ðµ Ð¿Ð¾Ñ‚ÐµÑ€Ð¸: 525,000â‚½/Ð½ÐµÐ´  |  Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ ÐºÐ°Ð¿Ð¸Ñ‚Ð°Ð»: 1,250,000â‚½              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TABLE (Story 6.3)                                                           â”‚
â”‚ ...                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### File Structure

```
src/
â”œâ”€â”€ app/(dashboard)/analytics/
â”‚   â””â”€â”€ supply-planning/
â”‚       â””â”€â”€ page.tsx              â† NEW
â”œâ”€â”€ components/custom/
â”‚   â”œâ”€â”€ SupplyPlanningPage.tsx    â† NEW (main layout)
â”‚   â”œâ”€â”€ SupplyRiskCards.tsx       â† NEW (4 risk cards)
â”‚   â””â”€â”€ SupplyPlanningHeader.tsx  â† NEW (header with controls)
```

### Risk Card Component

```typescript
interface RiskCardProps {
  status: StockoutStatus;
  count: number;
  potentialLoss?: number;
  isActive: boolean;
  onClick: () => void;
}

function RiskCard({ status, count, potentialLoss, isActive, onClick }: RiskCardProps) {
  const bgColor = isActive ? getStockoutStatusBgColor(status) : 'bg-white';
  const icon = getStockoutStatusIcon(status);
  const label = getStockoutStatusLabel(status);

  return (
    <Card
      className={cn(
        'cursor-pointer transition-all hover:shadow-md',
        bgColor,
        isActive && 'ring-2 ring-offset-2'
      )}
      onClick={onClick}
    >
      <CardHeader>
        <span className="text-2xl">{icon}</span>
        <CardTitle>{label}</CardTitle>
      </CardHeader>
      <CardContent>
        <div className="text-3xl font-bold">{count} SKU</div>
        {potentialLoss && (
          <div className="text-sm text-muted-foreground">
            ÐŸÐ¾Ñ‚ÐµÑ€Ð¸: {formatCurrency(potentialLoss)}
          </div>
        )}
      </CardContent>
    </Card>
  );
}
```

---

## UX/UI Expert Sections

> **âœ… UX SPECIFICATIONS PROVIDED BY SALLY (UX Expert) - 2025-12-09**

### ðŸ“ Risk Cards Design

#### Card Layout
| Property | Value |
|----------|-------|
| Card Width | `240px` min, `flex-1` in grid |
| Card Height | `140px` |
| Card Gap | `16px` |
| Border Radius | `12px` |
| Padding | `20px` |

**Structure**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ”´  ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡Ð½Ð¾                     â”‚  â† Icon + Status label
â”‚                                   â”‚
â”‚ 5 SKU                            â”‚  â† Count (large)
â”‚ ÐŸÐ¾Ñ‚ÐµÑ€Ð¸: 125 000 â‚½                â”‚  â† Potential loss
â”‚                                   â”‚
â”‚ [â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 5% Ð¾Ñ‚ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð°     â”‚  â† Progress bar (optional)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Visual Design - Status Colors (5 ÑÑ‚Ð°Ñ‚ÑƒÑÐ¾Ð²)

> **âœ… ÐžÐ‘ÐÐžÐ’Ð›Ð•ÐÐž 2025-12-12 Ð¿Ð¾ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°Ð¼ UX-Ñ€ÐµÐ²ÑŒÑŽ (ÑÐ¼. 6.UX-ANSWERS-SUPPLY-PLANNING.md)**

| Status | Russian Label | Background | Border | Icon (Lucide) | Text |
|--------|---------------|------------|--------|---------------|------|
| `out_of_stock` (stock=0) | ÐÐµÑ‚ Ð² Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ð¸ | `bg-gray-800` | `border-gray-900` | `PackageX` | `text-white` |
| `critical` (0-7 Ð´Ð½) | ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡Ð½Ð¾ | `bg-red-50` | `border-red-200` | `AlertTriangle` | `text-red-700` |
| `warning` (7-14 Ð´Ð½) | Ð’Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ | `bg-orange-50` | `border-orange-200` | `AlertCircle` | `text-orange-700` |
| `low` (14-30 Ð´Ð½) | ÐÐ¸Ð·ÐºÐ¸Ð¹ Ð·Ð°Ð¿Ð°Ñ | `bg-yellow-50` | `border-yellow-200` | `Clock` | `text-yellow-700` |
| `healthy` (>30 Ð´Ð½) | Ð’ Ð½Ð¾Ñ€Ð¼Ðµ | `bg-green-50` | `border-green-200` | `CheckCircle` | `text-green-700` |

**Ð’Ð°Ð¶Ð½Ð¾**: `out_of_stock` â€” ÑÑ‚Ð¾ Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹ Ñ **Ð½ÑƒÐ»ÐµÐ²Ñ‹Ð¼** Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ¾Ð¼ (stock=0), Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð¾Ñ‚ `critical`.

**States**:
| State | Style |
|-------|-------|
| Default | Border `1px`, no shadow |
| Hover | `shadow-md`, `scale(1.02)` transition 150ms |
| Active (filtered) | `ring-2 ring-offset-2` + darker background variant |
| Disabled | `opacity-50`, no hover |

#### Interaction
- **Click**: Filter table by this status
- **Click again** (same card): Clear filter (show all)
- **Animation**: Card scales up slightly on hover, ring appears on active
- **Visual feedback**: Checkmark or highlight in corner when active

---

### ðŸ“Š Total Metrics Bar

**Approved Design**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ ÐžÐ±Ñ‰Ð¸Ðµ Ð¿Ð¾Ñ‚ÐµÑ€Ð¸ (7 Ð´Ð½ÐµÐ¹): 525 000 â‚½    â”‚    ðŸ’° Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ ÐºÐ°Ð¿Ð¸Ñ‚Ð°Ð»: 1 250 000 â‚½ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| Property | Value |
|----------|-------|
| Layout | Inline, two metrics side-by-side |
| Background | `bg-gray-50` |
| Border | `1px solid #E0E0E0` |
| Border Radius | `8px` |
| Padding | `16px 24px` |
| Margin | `16px 0` (below cards, above table) |

**Typography**:
| Element | Style |
|---------|-------|
| Label | `text-sm text-gray-600` |
| Value | `text-lg font-bold text-gray-900` |
| Separator | `|` in `text-gray-300` |

**Icons (Lucide)**:
- ÐŸÐ¾Ñ‚ÐµÑ€Ð¸: `AlertTriangle` in `text-orange-500`
- ÐšÐ°Ð¿Ð¸Ñ‚Ð°Ð»: `Wallet` in `text-blue-500`

**Color Coding**:
- ÐŸÐ¾Ñ‚ÐµÑ€Ð¸ > 500K: `text-red-600` (critical)
- ÐŸÐ¾Ñ‚ÐµÑ€Ð¸ 100K-500K: `text-orange-600` (warning)
- ÐŸÐ¾Ñ‚ÐµÑ€Ð¸ < 100K: `text-green-600` (good)

---

### ðŸ“± Responsive Behavior

#### Cards on Different Screens
| Breakpoint | Layout |
|------------|--------|
| Desktop (â‰¥1280px) | 5 cards in single row |
| Tablet (768-1279px) | 3+2 grid (first row 3, second row 2) |
| Mobile (<768px) | 2+2+1 grid Ð¸Ð»Ð¸ horizontal scroll |

**Mobile Card Adjustments**:
- Height: `120px`
- Padding: `16px`
- Font sizes: Reduced by 1 step
- Loss amount: May be hidden (show on tap)

#### Total Metrics Bar
| Breakpoint | Layout |
|------------|--------|
| Desktop | Inline, side-by-side |
| Tablet | Inline, side-by-side |
| Mobile | Stacked vertically |

---

### â³ Loading States

**Skeleton Design (5 ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐµÐº)**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–‘â–‘â–‘â–‘â–‘    â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘    â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘    â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘    â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘    â”‚
â”‚ â–“â–“â–“â–“â–“â–“   â”‚ â”‚ â–“â–“â–“â–“â–“â–“   â”‚ â”‚ â–“â–“â–“â–“â–“â–“   â”‚ â”‚ â–“â–“â–“â–“â–“â–“   â”‚ â”‚ â–“â–“â–“â–“â–“â–“   â”‚
â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â”‚  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚  â† Metrics bar
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| Property | Value |
|----------|-------|
| Animation | `animate-pulse` (Tailwind) |
| Skeleton color | `bg-gray-200` |
| Delay before skeleton | 0ms (immediate) |
| Minimum display | 300ms (prevent flash) |

#### Empty State
- **Icon**: `Package` (Lucide) - 64px, gray-300
- **Title**: "ÐÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¾Ð± Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ°Ñ…"
- **Message**: "ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ðµ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ¾Ð² Ð¸Ð· Wildberries Ð´Ð»Ñ Ð°Ð½Ð°Ð»Ð¸Ð·Ð° Ñ€Ð¸ÑÐºÐ¾Ð² ÑÑ‚Ð¾ÐºÐ°ÑƒÑ‚Ð°"
- **CTA**: "ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚" (Primary button)

#### Error State
- **Icon**: `AlertTriangle` - 64px, red-400
- **Title**: "ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð´Ð°Ð½Ð½Ñ‹Ñ…"
- **Message**: "ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¾ Ð¿Ð¾ÑÑ‚Ð°Ð²ÐºÐ°Ñ…"
- **CTA**: "ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚ÑŒ" (Primary button)

---

## Definition of Done

- [ ] Page accessible at `/analytics/supply-planning`
- [ ] Navigation link added to sidebar
- [ ] Planning horizon selector functional
- [ ] All 4 risk cards display correct data
- [ ] Card click filters data
- [ ] Total metrics displayed
- [ ] Refresh button works with timestamp
- [ ] Loading/Empty/Error states implemented
- [ ] **UX specifications approved and implemented**
- [ ] Responsive on all breakpoints
- [ ] Accessibility audit passed

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-09 | 1.0 | Initial story creation | Sarah (PO) |
| 2025-12-09 | 1.1 | UX specifications (4 cards) | Sally (UX Expert) |
| 2025-12-12 | 2.0 | **UX Update**: 5 ÑÑ‚Ð°Ñ‚ÑƒÑÐ¾Ð² Ð²Ð¼ÐµÑÑ‚Ð¾ 4, Ð½Ð¾Ð²Ñ‹Ð¹ `out_of_stock`, Ð¿ÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ð°Ð½Ð¸Ðµ `monitor`â†’`low`, `safe`â†’`healthy`, badge Ð² Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸ | Sally (UX Expert) |

---

## Dev Agent Record

_(To be populated by dev agent)_

---

## QA Results

### Review Date: 2025-12-13

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

**Overall**: Complete implementation with 5 risk cards, metrics bar, all states.

### Requirements Traceability

| AC | Status | Evidence |
|----|--------|----------|
| 1-9 (Functional) | âœ… PASS | Components verified |
| 10-12 (Integration) | âœ… PASS | Navigation, hooks working |
| 13-15 (Quality) | âœ… PASS | Responsive, <500ms |

### Files Verified

- `page.tsx` - Main page with all states
- `SupplyPlanningHeader.tsx` - Controls
- `SupplyRiskCards.tsx` - 5 status cards
- `SupplyMetricsBar.tsx` - Totals
- `SupplyPlanningLoading.tsx` - Skeleton
- `SupplyPlanningEmpty.tsx` - Empty state

### Gate Status

Gate: **PASS** â†’ `docs/qa/gates/6.2-supply-planning-page-structure.yml`
