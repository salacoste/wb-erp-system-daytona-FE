# –ü–ª–∞–Ω —Ä–µ—à–µ–Ω–∏—è: Revenue –≤—Å–µ–≥–¥–∞ 0 –≤ —Ç—Ä–µ–Ω–¥–∞—Ö

**–î–∞—Ç–∞:** 2025-11-22  
**Story:** 3.4 (Trend Graphs for Key Metrics)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** HIGH

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

### –§–∞–∫—Ç—ã

1. **–í –ë–î –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞:** `sale_gross_total = 0.00` –¥–ª—è –≤—Å–µ—Ö –Ω–µ–¥–µ–ª—å
2. **–í –ë–î –¥–ª—è –¥—Ä—É–≥–∏—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤:** `sale_gross_total` –∏–º–µ–µ—Ç –Ω–µ–Ω—É–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, W36: 311381.04)
3. **Frontend –∫–æ–¥:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç `sale_gross_total` –∏–∑ `summary_total`
4. **–ü—Ä–æ–±–ª–µ–º–∞:** –õ–∏–±–æ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ, –ª–∏–±–æ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

**–¢–∞–±–ª–∏—Ü–∞ `weekly_payout_total`:**
- –ï—Å—Ç—å —Ç–æ–ª—å–∫–æ `sale_gross_total` (–∫–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π `sale_gross_rus`, `sale_gross_eaeu`
- –î–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è = 0.00

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API –æ—Ç–≤–µ—Ç–∞

**Endpoint:** `/v1/analytics/weekly/finance-summary?week={week}`

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "summary_total": {
    "sale_gross_total": 0.00,  // ‚Üê –ü—Ä–æ–±–ª–µ–º–∞: –≤—Å–µ–≥–¥–∞ 0
    "to_pay_goods_total": 195470.62
  },
  "summary_rus": {
    "sale_gross": ???,  // ‚Üê –í–æ–∑–º–æ–∂–Ω–æ, –∑–¥–µ—Å—å –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ?
  },
  "summary_eaeu": {
    "sale_gross": ???,  // ‚Üê –í–æ–∑–º–æ–∂–Ω–æ, –∑–¥–µ—Å—å –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ?
  }
}
```

---

## üìã –ü–ª–∞–Ω —Ä–µ—à–µ–Ω–∏—è

### –≠—Ç–∞–ø 1: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–¢–ï–ö–£–©–ò–ô –≠–¢–ê–ü)

#### 1.1 –î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ

**–§–∞–π–ª:** `src/hooks/useTrends.ts`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `summaryResponse` –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–µ–¥–µ–ª–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–ª—é—á–µ–π –≤ `summary_total`, `summary_rus`, `summary_eaeu`
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π `sale_gross_total` –∏ `sale_gross` –∏–∑ –≤—Å–µ—Ö summary
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –µ—Å–ª–∏ revenue = 0, –Ω–æ –ø–æ–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—Ç

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

#### 1.2 –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ ‚è≥

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –û—Ç–∫—Ä—ã—Ç—å dashboard –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –û—Ç–∫—Ä—ã—Ç—å DevTools (F12) ‚Üí Console
3. –ù–∞–π—Ç–∏ –ª–æ–≥–∏ `[Trends] Finance summary for week {week}:`
4. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- `summary_total.sale_gross_total` - –∑–Ω–∞—á–µ–Ω–∏–µ
- `summary_rus.sale_gross` - –∑–Ω–∞—á–µ–Ω–∏–µ
- `summary_eaeu.sale_gross` - –∑–Ω–∞—á–µ–Ω–∏–µ
- –í—Å–µ –∫–ª—é—á–∏ –≤ –∫–∞–∂–¥–æ–º summary –æ–±—ä–µ–∫—Ç–µ
- –ï—Å—Ç—å –ª–∏ –¥—Ä—É–≥–∏–µ –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å revenue

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–æ–Ω—è—Ç—å, –≥–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ (summary_total, summary_rus, summary_eaeu)
- –ü–æ–Ω—è—Ç—å, –∫–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª–µ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ
- –ü–æ–Ω—è—Ç—å, –Ω—É–∂–Ω–æ –ª–∏ —Å—É–º–º–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

#### 1.3 –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API –Ω–∞–ø—Ä—è–º—É—é ‚è≥

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å test-api/05-analytics-basic.http:**
```http
### Get Finance Summary for Week
GET {{baseUrl}}/v1/analytics/weekly/finance-summary?week=2025-W40
Authorization: Bearer {{token}}
X-Cabinet-Id: {{cabinetId}}
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- –ü–æ–ª–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–∞
- –ó–Ω–∞—á–µ–Ω–∏—è –≤–æ –≤—Å–µ—Ö —Ç—Ä–µ—Ö summary (total, rus, eaeu)
- –ï—Å—Ç—å –ª–∏ –¥—Ä—É–≥–∏–µ –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å revenue

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –£–≤–∏–¥–µ—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç backend
- –°—Ä–∞–≤–Ω–∏—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ –ë–î
- –ü–æ–Ω—è—Ç—å, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ backend –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ

---

### –≠—Ç–∞–ø 2: –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

#### –†–µ—à–µ–Ω–∏–µ A: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å summary_rus + summary_eaeu

**–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å –≤ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö summary:**

**–ü—Ä–æ–±–ª–µ–º–∞:** `summary_total.sale_gross_total = 0`, –Ω–æ `summary_rus.sale_gross` –∏/–∏–ª–∏ `summary_eaeu.sale_gross` –∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è.

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –í useTrends.ts, —Å—Ç—Ä–æ–∫–∞ 68
// –°–Ω–∞—á–∞–ª–∞ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å summary_total
// –ï—Å–ª–∏ 0 –∏–ª–∏ undefined, —Å—É–º–º–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
const revenueFromTotal = summaryResponse.summary_total?.sale_gross_total ?? 0
const revenueFromRus = summaryResponse.summary_rus?.sale_gross ?? 0
const revenueFromEaeu = summaryResponse.summary_eaeu?.sale_gross ?? 0

// –ï—Å–ª–∏ summary_total = 0, –Ω–æ –µ—Å—Ç—å —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö —Å—É–º–º—É
const revenue = revenueFromTotal > 0 
  ? revenueFromTotal 
  : (revenueFromRus + revenueFromEaeu) || 0
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –ï—Å–ª–∏ `summary_total` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ
- –ï—Å–ª–∏ `summary_total = 0`, –Ω–æ –µ—Å—Ç—å —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Üí —Å—É–º–º–∏—Ä—É–µ–º –∏—Ö
- –≠—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –ø–æ–∫–∞ backend –Ω–µ –∏—Å–ø—Ä–∞–≤–∏—Ç –∞–≥—Ä–µ–≥–∞—Ü–∏—é

#### –†–µ—à–µ–Ω–∏–µ B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–µ –ø–æ–ª–µ

**–ï—Å–ª–∏ –ø–æ–ª–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ-–¥—Ä—É–≥–æ–º—É:**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª–µ `sale_gross_total` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω–∞—á–µ –≤ API –æ—Ç–≤–µ—Ç–µ.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é backend
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DTO —Ñ–∞–π–ª—ã backend
3. –û–±–Ω–æ–≤–∏—Ç—å `FinanceSummary` interface
4. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏–º–µ—Ä:**
```typescript
// –ï—Å–ª–∏ –ø–æ–ª–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ-–¥—Ä—É–≥–æ–º—É
const revenue = summary.revenue_total ?? summary.revenue ?? summary.sale_gross_total ?? summary.sale_gross ?? 0
```

#### –†–µ—à–µ–Ω–∏–µ C: Backend –ø—Ä–æ–±–ª–µ–º–∞ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ backend)

**–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ 0, –Ω–æ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–µ–Ω—É–ª–µ–≤—ã–º–∏:**

**–ü—Ä–æ–±–ª–µ–º–∞:** Backend –Ω–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç `sale_gross_total` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `weekly_payout_total`.

**–†–µ—à–µ–Ω–∏–µ:**
1. –°–æ–∑–¥–∞—Ç—å –∑–∞–ø—Ä–æ—Å –∫ backend team –≤ `@request-backend`
2. –û–ø–∏—Å–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É:
   - –í –ë–î `sale_gross_total = 0.00` –¥–ª—è –≤—Å–µ—Ö –Ω–µ–¥–µ–ª—å –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
   - –£ –¥—Ä—É–≥–∏—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤ –µ—Å—Ç—å –Ω–µ–Ω—É–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
   - Frontend –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î
   - –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≥—Ä–µ–≥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –Ω–∞ backend

**–®–∞–±–ª–æ–Ω –∑–∞–ø—Ä–æ—Å–∞:**
```markdown
# –ü—Ä–æ–±–ª–µ–º–∞: sale_gross_total –≤—Å–µ–≥–¥–∞ 0 –≤ weekly_payout_total

## –û–ø–∏—Å–∞–Ω–∏–µ
–î–ª—è –∫–∞–±–∏–Ω–µ—Ç–∞ {cabinet_id} –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è `sale_gross_total` –≤ —Ç–∞–±–ª–∏—Ü–µ `weekly_payout_total` —Ä–∞–≤–Ω—ã 0.00, —Ö–æ—Ç—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–µ–Ω—É–ª–µ–≤—ã–º–∏.

## –î–∞–Ω–Ω—ã–µ
- –ö–∞–±–∏–Ω–µ—Ç: f75836f7-c0bc-4b2c-823c-a1f3508cce8e
- –ù–µ–¥–µ–ª–∏: –í—Å–µ 16 –Ω–µ–¥–µ–ª—å –∏–º–µ—é—Ç sale_gross_total = 0.00
- to_pay_goods_total: –ò–º–µ–µ—Ç –Ω–µ–Ω—É–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, W40: 384079.04)

## –í–æ–ø—Ä–æ—Å—ã
1. –ü–æ—á–µ–º—É sale_gross_total = 0 –¥–ª—è —ç—Ç–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞?
2. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –∞–≥—Ä–µ–≥–∏—Ä—É—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ weekly_payout_total?
3. –ù—É–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å summary_rus + summary_eaeu –≤–º–µ—Å—Ç–æ summary_total?
```

#### –†–µ—à–µ–Ω–∏–µ D: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞—Å—á–µ—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

**–ï—Å–ª–∏ revenue –º–æ–∂–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏–∑ –¥—Ä—É–≥–∏—Ö –ø–æ–ª–µ–π:**

**–ü—Ä–æ–±–ª–µ–º–∞:** `sale_gross_total` –Ω–µ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è, –Ω–æ –º–æ–∂–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏–∑ –¥—Ä—É–≥–∏—Ö –ø–æ–ª–µ–π.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º—É–ª—É —Ä–∞—Å—á–µ—Ç–∞ revenue –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞—Å—á–µ—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∫ fallback

**–ü—Ä–∏–º–µ—Ä (–µ—Å–ª–∏ —Ñ–æ—Ä–º—É–ª–∞ –∏–∑–≤–µ—Å—Ç–Ω–∞):**
```typescript
// –ï—Å–ª–∏ revenue = to_pay_goods + expenses (–ø—Ä–∏–º–µ—Ä, –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—É—é —Ñ–æ—Ä–º—É–ª—É)
const revenue = summary.sale_gross_total ?? 
  (summary.to_pay_goods_total + summary.logistics_cost_total + summary.storage_cost_total + ...) ??
  0
```

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–°–†–û–ß–ù–û)

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É dashboard –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –û—Ç–∫—Ä—ã—Ç—å DevTools (F12) ‚Üí Console
3. –ù–∞–π—Ç–∏ –ª–æ–≥–∏ `[Trends] Finance summary for week {week}:`
4. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–∞ –¥–ª—è 2-3 –Ω–µ–¥–µ–ª—å

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å:**
- –ó–Ω–∞—á–µ–Ω–∏—è `sale_gross_total` –≤ `summary_total`
- –ó–Ω–∞—á–µ–Ω–∏—è `sale_gross` –≤ `summary_rus`
- –ó–Ω–∞—á–µ–Ω–∏—è `sale_gross` –≤ `summary_eaeu`
- –ï—Å—Ç—å –ª–∏ –¥—Ä—É–≥–∏–µ –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å revenue

**–†–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –¥–∞–ª—å–Ω–µ–π—à–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:**
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å –≤ `summary_rus` –∏–ª–∏ `summary_eaeu` ‚Üí –†–µ—à–µ–Ω–∏–µ A
- –ï—Å–ª–∏ –ø–æ–ª–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ-–¥—Ä—É–≥–æ–º—É ‚Üí –†–µ—à–µ–Ω–∏–µ B
- –ï—Å–ª–∏ –≤—Å–µ –ø–æ–ª—è = 0 –∏–ª–∏ undefined ‚Üí –†–µ—à–µ–Ω–∏–µ C (backend –ø—Ä–æ–±–ª–µ–º–∞)

### –®–∞–≥ 2: –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ

**–ù–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –®–∞–≥–∞ 1:**

**–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ summary_rus/eaeu:**
- –ü—Ä–∏–º–µ–Ω–∏—Ç—å –†–µ—à–µ–Ω–∏–µ A (—Å—É–º–º–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)

**–ï—Å–ª–∏ –ø–æ–ª–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ-–¥—Ä—É–≥–æ–º—É:**
- –ü—Ä–∏–º–µ–Ω–∏—Ç—å –†–µ—à–µ–Ω–∏–µ B (–æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥)

**–ï—Å–ª–∏ –≤—Å–µ –ø–æ–ª—è = 0:**
- –ü—Ä–∏–º–µ–Ω–∏—Ç—å –†–µ—à–µ–Ω–∏–µ C (—Å–æ–∑–¥–∞—Ç—å –∑–∞–ø—Ä–æ—Å –∫ backend)

### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–µ—à–µ–Ω–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ, —á—Ç–æ revenue –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –Ω–µ–¥–µ–ª—å
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤ (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)

---

## üìù –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

1. –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `useTrends.ts`
2. –°–æ–∑–¥–∞–Ω –¥–æ–∫—É–º–µ–Ω—Ç —Å –∞–Ω–∞–ª–∏–∑–æ–º –ø—Ä–æ–±–ª–µ–º—ã
3. –°–æ–∑–¥–∞–Ω –ø–ª–∞–Ω —Ä–µ—à–µ–Ω–∏—è

### ‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ

1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ API –Ω–∞–ø—Ä—è–º—É—é (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

### üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–∞
2. **Dev:** –ù–∞ –æ—Å–Ω–æ–≤–µ –ª–æ–≥–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
3. **Dev:** –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ
4. **Dev:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

---

## üîß –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∏ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å –≤ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö summary:

```typescript
// –í useTrends.ts, —Å—Ç—Ä–æ–∫–∞ 68
// –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
const revenueFromTotal = summaryResponse.summary_total?.sale_gross_total ?? 0
const revenueFromRus = summaryResponse.summary_rus?.sale_gross ?? 0
const revenueFromEaeu = summaryResponse.summary_eaeu?.sale_gross ?? 0

// –ï—Å–ª–∏ summary_total = 0, –Ω–æ –µ—Å—Ç—å —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö —Å—É–º–º—É
const revenue = revenueFromTotal > 0 
  ? revenueFromTotal 
  : (revenueFromRus + revenueFromEaeu) || 0
```

**–ù–æ:** –≠—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ. –ù—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å –∫–æ—Ä–Ω–µ–≤—É—é –ø—Ä–∏—á–∏–Ω—É.

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

