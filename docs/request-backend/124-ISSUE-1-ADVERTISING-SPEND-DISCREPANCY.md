# Issue #1: –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ

**–í–µ—Ä—Å–∏—è**: 1.0 | **–î–∞—Ç–∞**: 2026-02-01 | **–°—Ç–∞—Ç—É—Å**: –í —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã](#1-–æ–ø–∏—Å–∞–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º—ã)
2. [–ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è](#2-–∞–Ω–∞–ª–∏–∑-–ø—Ä–∏—á–∏–Ω-—Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è)
3. [–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API](#3-–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-api)
4. [–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞](#4-–ø—Ä–∏–º–µ—Ä—ã-–∫–æ–¥–∞)
5. [–í–ª–∏—è–Ω–∏–µ –Ω–∞ –±–∏–∑–Ω–µ—Å](#5-–≤–ª–∏—è–Ω–∏–µ-–Ω–∞-–±–∏–∑–Ω–µ—Å)
6. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é](#6-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–ø–æ-–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é)

---

## 1. –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1.1 –°–∏–º–ø—Ç–æ–º—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –§—Ä–æ–Ω—Ç–µ–Ω–¥ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è) | Backend API | –†–∞–∑–Ω–∏—Ü–∞ |
|----------|-------------------------|-------------|---------|
| **–†–µ–∫–ª–∞–º–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã W04** | 3,728.55 ‚ÇΩ | 3,846.34 ‚ÇΩ | **117.79 ‚ÇΩ (3.06%)** |

**–ü–µ—Ä–∏–æ–¥**: –ù–µ–¥–µ–ª—è W04 (2026-W04) = 20-26 —è–Ω–≤–∞—Ä—è 2026

### 1.2 –ë–∏–∑–Ω–µ—Å-–≤–ª–∏—è–Ω–∏–µ

- **–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–±—ã–ª—å (Theoretical Profit)** —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–µ–≤–µ—Ä–Ω–æ
- –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ 3% –º–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –±—é–¥–∂–µ—Ç–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –¥–∞–Ω–Ω—ã–µ, –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–º WB –∫–∞–±–∏–Ω–µ—Ç–∞

---

## 2. –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è

### 2.1 –í–µ—Ä–æ—è—Ç–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

| # | –ü—Ä–∏—á–∏–Ω–∞ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---------|-------------|----------|
| 1 | **–†–∞–∑–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö** | üî¥ –í—ã—Å–æ–∫–∞—è | –§—Ä–æ–Ω—Ç–µ–Ω–¥ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `finance-summary` –≤–º–µ—Å—Ç–æ `advertising` API |
| 2 | **–ù–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤** | üü° –°—Ä–µ–¥–Ω—è—è | –ù–µ–¥–µ–ª—è ISO vs –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–µ –¥–∞—Ç—ã |
| 3 | **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** | üü° –°—Ä–µ–¥–Ω—è—è | Redis cache TTL 30 –º–∏–Ω –¥–ª—è advertising API |
| 4 | **–†–∞–∑–Ω—ã–µ endpoints** | üî¥ –í—ã—Å–æ–∫–∞—è | `wb_promotion_cost` vs `totalSpend` |

### 2.2 –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö

#### –ò—Å—Ç–æ—á–Ω–∏–∫ 1: Finance Summary (`/v1/analytics/weekly/finance-summary`)

–í —Ñ–∞–π–ª–µ `useExpenses.ts` —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Ä–µ–∫–ª–∞–º—É –±–µ—Ä—É—Ç—Å—è –∏–∑ –ø–æ–ª—è:
```typescript
// –°—Ç—Ä–æ–∫–∞ 137-140 –≤ useExpenses.ts
{
  category: 'WB.–ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ',
  amount: summary.wb_promotion_cost_total ?? summary.wb_promotion_cost ?? 0,
}
```

**–ü—Ä–æ–±–ª–µ–º–∞**: `wb_promotion_cost` - —ç—Ç–æ –¥–∞–Ω–Ω—ã–µ –∏–∑ **–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –æ—Ç—á—ë—Ç–∞ WB** (Excel –∏–º–ø–æ—Ä—Ç), –∞ –Ω–µ –∏–∑ **Promotion API**.

#### –ò—Å—Ç–æ—á–Ω–∏–∫ 2: Advertising Analytics (`/v1/analytics/advertising`)

```typescript
// –û—Ç–≤–µ—Ç API (summary.totalSpend)
{
  "summary": {
    "totalSpend": 3846.34,  // ‚Üê –≠—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    // ...
  }
}
```

**–≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ**: –°—É–º–º–∞ `spend` –∏–∑ `adv_daily_stats` –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥, –∏—Å—Ç–æ—á–Ω–∏–∫ - **WB Promotion API (getFullStats)**.

### 2.3 –ö–ª—é—á–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è

| –ü–æ–ª–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ | API | –î–∞–Ω–Ω—ã–µ |
|------|----------|-----|--------|
| `wb_promotion_cost` | –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç WB (Excel) | Finance Summary | –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é, –º–æ–≥—É—Ç –≤–∫–ª—é—á–∞—Ç—å –ù–î–° |
| `totalSpend` | WB Promotion API (getFullStats) | Advertising Analytics | –î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –¥–Ω—è–º/SKU, –±–µ–∑ –ù–î–° |

**–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ 117.79 ‚ÇΩ (~3%) –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–æ —Å**:
1. –†–∞–∑–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ WB
2. –í–∫–ª—é—á–µ–Ω–∏–µ–º/–∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –ù–î–°
3. –í—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏ –≤ —Ñ–∏–Ω–æ—Ç—á—ë—Ç–µ WB
4. –û–∫—Ä—É–≥–ª–µ–Ω–∏—è–º–∏ –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

---

## 3. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

### 3.1 –û—Å–Ω–æ–≤–Ω–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç

```http
GET /v1/analytics/advertising
```

### 3.2 –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –Ω–µ–¥–µ–ª–∏ W04 (2026-W04)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| `from` | `2026-01-20` | –ù–∞—á–∞–ª–æ –Ω–µ–¥–µ–ª–∏ (–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫) |
| `to` | `2026-01-26` | –ö–æ–Ω–µ—Ü –Ω–µ–¥–µ–ª–∏ (–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ) |
| `view_by` | `sku` (default) | –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞: `sku`, `campaign`, `brand`, `category` |

### 3.3 –ü–æ–ª–Ω—ã–π URL –∑–∞–ø—Ä–æ—Å–∞

```http
GET /v1/analytics/advertising?from=2026-01-20&to=2026-01-26
Authorization: Bearer {{JWT_TOKEN}}
X-Cabinet-Id: {{CABINET_ID}}
Content-Type: application/json
```

### 3.4 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞

```json
{
  "items": [...],
  "summary": {
    "totalSpend": 3846.34,        // ‚Üê –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ –≠–¢–û –ó–ù–ê–ß–ï–ù–ò–ï
    "totalRevenue": 450000.00,
    "totalProfit": 85000.00,
    "totalProfitAfterAds": 40000.00,
    "totalViews": 1500000,
    "totalClicks": 75000,
    "totalOrders": 3750,
    "avgRoas": 3.6,
    "avgRoi": 0.68,
    "avgCtr": 5.0,
    "avgCpc": 1.67,
    "avgConversionRate": 5.0
  },
  "query": {
    "from": "2026-01-20",
    "to": "2026-01-26",
    "viewBy": "sku"
  },
  "pagination": {
    "total": 150,
    "limit": 100,
    "offset": 0
  },
  "cachedAt": "2026-02-01T10:30:00.000Z"
}
```

### 3.5 –ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```
summary.totalSpend - –°—É–º–º–∞ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç –∑–∞ –ø–µ—Ä–∏–æ–¥ (‚ÇΩ)
```

---

## 4. –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### 4.1 –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç (TypeScript)

```typescript
import { apiClient } from '@/lib/api-client';

interface AdvertisingResponse {
  summary: {
    totalSpend: number;
    totalRevenue: number;
    totalProfit: number;
    avgRoas: number;
    avgRoi: number;
  };
  query: {
    from: string;
    to: string;
    viewBy: string;
  };
  cachedAt: string;
}

/**
 * –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–ª–∞–º–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –∑–∞ –Ω–µ–¥–µ–ª—é W04 (2026)
 *
 * –í–ê–ñ–ù–û: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å /v1/analytics/advertising, –∞ –Ω–µ finance-summary
 * –ü—Ä–∏—á–∏–Ω–∞: advertising API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ WB Promotion API (—Ç–æ—á–Ω—ã–µ)
 *          finance-summary –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Excel-–æ—Ç—á—ë—Ç–∞ (–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)
 */
async function getAdvertisingSpendForWeek(weekNumber: number, year: number): Promise<number> {
  // –í—ã—á–∏—Å–ª—è–µ–º –¥–∞—Ç—ã –Ω–µ–¥–µ–ª–∏ ISO
  const { from, to } = getWeekDateRange(year, weekNumber);

  const response = await apiClient.get<AdvertisingResponse>(
    `/v1/analytics/advertising?from=${from}&to=${to}`,
    { skipDataUnwrap: true }
  );

  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º totalSpend –∏–∑ summary
  return response.summary.totalSpend;
}

/**
 * –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è: –¥–∞—Ç—ã ISO –Ω–µ–¥–µ–ª–∏
 */
function getWeekDateRange(year: number, week: number): { from: string; to: string } {
  // ISO –Ω–µ–¥–µ–ª—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞
  // W04 2026 = 20-26 —è–Ω–≤–∞—Ä—è 2026

  const firstDayOfYear = new Date(year, 0, 1);
  const dayOfWeek = firstDayOfYear.getDay();
  const firstMonday = new Date(year, 0, 1 + ((8 - dayOfWeek) % 7 || 7) - 7);

  const weekStart = new Date(firstMonday);
  weekStart.setDate(weekStart.getDate() + (week - 1) * 7);

  const weekEnd = new Date(weekStart);
  weekEnd.setDate(weekEnd.getDate() + 6);

  return {
    from: weekStart.toISOString().split('T')[0],
    to: weekEnd.toISOString().split('T')[0],
  };
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
const advertisingSpend = await getAdvertisingSpendForWeek(4, 2026);
console.log(`–†–µ–∫–ª–∞–º–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã W04: ${advertisingSpend} ‚ÇΩ`);
// –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 3846.34 ‚ÇΩ
```

### 4.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Dashboard (React + TanStack Query)

```typescript
import { useQuery } from '@tanstack/react-query';
import { getAdvertisingAnalytics } from '@/lib/api/advertising-analytics';

/**
 * Hook –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç –Ω–∞ –¥–∞—à–±–æ—Ä–¥
 *
 * @param week - ISO –Ω–µ–¥–µ–ª—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-Www (–Ω–∞–ø—Ä–∏–º–µ—Ä, "2026-W04")
 */
export function useDashboardAdvertisingSpend(week: string) {
  // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º ISO –Ω–µ–¥–µ–ª—é –≤ –¥–∞—Ç—ã
  const { from, to } = isoWeekToDates(week);

  return useQuery({
    queryKey: ['dashboard', 'advertising-spend', week],
    queryFn: async () => {
      const response = await getAdvertisingAnalytics({
        from,
        to,
      });

      return {
        totalSpend: response.summary.total_spend,
        totalRevenue: response.summary.total_revenue,
        roas: response.summary.overall_roas,
        cachedAt: response.meta.last_sync,
      };
    },
    staleTime: 30 * 1000, // 30 —Å–µ–∫—É–Ω–¥ (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç TTL –∫–µ—à–∞ backend)
    gcTime: 5 * 60 * 1000, // 5 –º–∏–Ω—É—Ç
  });
}

/**
 * –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è ISO –Ω–µ–¥–µ–ª–∏ –≤ –¥–∞—Ç—ã
 */
function isoWeekToDates(isoWeek: string): { from: string; to: string } {
  // "2026-W04" ‚Üí { from: "2026-01-20", to: "2026-01-26" }
  const [year, weekPart] = isoWeek.split('-W');
  const weekNumber = parseInt(weekPart, 10);

  // –ò—Å–ø–æ–ª—å–∑—É–µ–º date-fns –∏–ª–∏ –∞–Ω–∞–ª–æ–≥ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å ISO –Ω–µ–¥–µ–ª—è–º–∏
  const startDate = startOfISOWeek(setISOWeek(new Date(parseInt(year, 10), 0, 4), weekNumber));
  const endDate = endOfISOWeek(startDate);

  return {
    from: format(startDate, 'yyyy-MM-dd'),
    to: format(endDate, 'yyyy-MM-dd'),
  };
}
```

### 4.3 –ü—Ä–∏–º–µ—Ä HTTP-–∑–∞–ø—Ä–æ—Å–∞ (REST Client)

```http
### –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–ª–∞–º–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –∑–∞ –Ω–µ–¥–µ–ª—é W04 (2026)
# –ü–µ—Ä–∏–æ–¥: 20-26 —è–Ω–≤–∞—Ä—è 2026
# –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö: WB Promotion API (getFullStats)
# –ü–æ–ª–µ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: summary.totalSpend

GET http://localhost:3000/v1/analytics/advertising?from=2026-01-20&to=2026-01-26
Authorization: Bearer {{authToken}}
X-Cabinet-Id: {{cabinetId}}
Content-Type: application/json

### –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
# {
#   "summary": {
#     "totalSpend": 3846.34,  // ‚Üê –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç
#     ...
#   },
#   ...
# }
```

---

## 5. –í–ª–∏—è–Ω–∏–µ –Ω–∞ –±–∏–∑–Ω–µ—Å

### 5.1 –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –í–ª–∏—è–Ω–∏–µ |
|---------|------------------|---------------------|---------|
| –†–µ–∫–ª–∞–º–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã | 3,728.55 ‚ÇΩ | 3,846.34 ‚ÇΩ | +117.79 ‚ÇΩ |
| –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–±—ã–ª—å | –ó–∞–≤—ã—à–µ–Ω–∞ –Ω–∞ ~118 ‚ÇΩ | - | –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ |

### 5.2 –ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π

–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ 3% –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫:
- **–ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–º—É —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –±—é–¥–∂–µ—Ç–∞**
- **–ó–∞–≤—ã—à–µ–Ω–Ω–æ–π –æ—Ü–µ–Ω–∫–µ ROAS/ROI**
- **–ù–µ–≤–µ—Ä–Ω—ã–º –ø—Ä–æ–≥–Ω–æ–∑–∞–º –æ–∫—É–ø–∞–µ–º–æ—Å—Ç–∏ –∫–∞–º–ø–∞–Ω–∏–π**

### 5.3 –î–æ–≤–µ—Ä–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å WB –∫–∞–±–∏–Ω–µ—Ç–æ–º
- –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –ø–æ–¥—Ä—ã–≤–∞—é—Ç –¥–æ–≤–µ—Ä–∏–µ –∫ —Å–∏—Å—Ç–µ–º–µ
- –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö

---

## 6. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

### 6.1 –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (Quick Fix)

**–î–ª—è –¥–∞—à–±–æ—Ä–¥–∞ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç**:

1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `/v1/analytics/advertising` –≤–º–µ—Å—Ç–æ –ø–æ–ª—è `wb_promotion_cost` –∏–∑ `finance-summary`
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `summary.totalSpend` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—É–º–º—ã —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç

### 6.2 –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

1. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö**: –í—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è Advertising API)
2. **–î–æ–±–∞–≤–∏—Ç—å tooltip —Å –ø–æ—è—Å–Ω–µ–Ω–∏–µ–º**: –£–∫–∞–∑—ã–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ UI
3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–≤–µ—Ä–∫—É –¥–∞–Ω–Ω—ã—Ö**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

### 6.3 –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

#### –§–∞–π–ª: `frontend/src/hooks/useExpenses.ts`

**–¢–µ–∫—É—â–∏–π –∫–æ–¥ (—Å—Ç—Ä–æ–∫–∏ 137-140)**:
```typescript
{
  category: 'WB.–ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ',
  amount: summary.wb_promotion_cost_total ?? summary.wb_promotion_cost ?? 0,
}
```

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ**:

–°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π hook –¥–ª—è —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π Advertising API:

```typescript
// frontend/src/hooks/useDashboardAdvertisingExpense.ts
export function useDashboardAdvertisingExpense(week: string) {
  const { from, to } = isoWeekToDates(week);

  return useQuery({
    queryKey: ['dashboard', 'advertising-expense', week],
    queryFn: async () => {
      const response = await getAdvertisingAnalytics({ from, to });
      return response.summary.total_spend;
    },
    staleTime: 30000,
  });
}
```

### 6.4 –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –î–µ–π—Å—Ç–≤–∏–µ | –°—Ä–æ–∫ |
|-----------|----------|------|
| üî¥ –í—ã—Å–æ–∫–∏–π | –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ | 1-2 –¥–Ω—è |
| üü° –°—Ä–µ–¥–Ω–∏–π | –î–æ–±–∞–≤–∏—Ç—å tooltip —Å –ø–æ—è—Å–Ω–µ–Ω–∏–µ–º | 3-5 –¥–Ω–µ–π |
| üü¢ –ù–∏–∑–∫–∏–π | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–≤–µ—Ä–∫—É | 1-2 –Ω–µ–¥–µ–ª–∏ |

---

## –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [123-DASHBOARD-MAIN-PAGE-EXPENSES-API.md](./123-DASHBOARD-MAIN-PAGE-EXPENSES-API.md) - API —Ä–∞—Å—Ö–æ–¥–æ–≤ –¥–∞—à–±–æ—Ä–¥–∞
- [ADVERTISING-ANALYTICS-GUIDE.md](../../docs/ADVERTISING-ANALYTICS-GUIDE.md) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–µ–∫–ª–∞–º–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–µ
- [test-api/07-advertising-analytics.http](../../test-api/07-advertising-analytics.http) - –ü—Ä–∏–º–µ—Ä—ã HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤

---

**–ê–≤—Ç–æ—Ä**: Financial Analytics Documentation Specialist
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2026-02-01
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2026-02-01
