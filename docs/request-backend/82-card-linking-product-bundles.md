# Request #82: –°–∫–ª–µ–π–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ (Card Linking) - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç

**–î–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞**: 2025-12-27
**–°—Ç–∞—Ç—É—Å**: üîç –¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: High
**–ó–∞–ø—Ä–æ—à–µ–Ω–æ**: Frontend Team (Epic 33: Advertising Analytics)

---

## üìã –ó–∞–ø—Ä–æ—Å –æ—Ç Frontend

### –ü—Ä–æ–±–ª–µ–º–∞: –ê–Ω–æ–º–∞–ª–∏—è –≤ –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∫–ª–∞–º–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

–ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø–µ—Ä–∏–æ–¥ 2025-12-13 to 2025-12-26) –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –∞–Ω–æ–º–∞–ª–∏—è —É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤:

| –ê—Ä—Ç–∏–∫—É–ª | –ó–∞—Ç—Ä–∞—Ç—ã (spend) | –ò–∑ —Ä–µ–∫–ª–∞–º—ã (revenue) | –í—Å–µ–≥–æ –ø—Ä–æ–¥–∞–∂ | –û—Ä–≥–∞–Ω–∏–∫–∞ | –°—Ç–∞—Ç—É—Å |
|---------|----------------|---------------------|--------------|----------|---------|
| **izo30white** (235269056) | **0‚ÇΩ** | 1,113‚ÇΩ | 4,524‚ÇΩ | 3,411‚ÇΩ (75%) | üîµ –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö |
| **ter-09** (173588306) | **0‚ÇΩ** | 1,105‚ÇΩ | 1,105‚ÇΩ | 0‚ÇΩ (0%) | üîµ –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö |
| **ter-10** (173589306) | **0‚ÇΩ** | 1,489‚ÇΩ | 1,489‚ÇΩ | 0‚ÇΩ (0%) | üîµ –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö |
| **ter-11** (173589742) | **0‚ÇΩ** | 1,512‚ÇΩ | 1,512‚ÇΩ | 0‚ÇΩ (0%) | üîµ –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö |
| **ter-20** (270958590) | **0‚ÇΩ** | 5,433‚ÇΩ | 9,205‚ÇΩ | 3,772‚ÇΩ (41%) | üîµ –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö |
| **ll-20-wh** (148188881) | **0‚ÇΩ** | 391‚ÇΩ | 2,525‚ÇΩ | 2,134‚ÇΩ (85%) | üîµ –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö |

**–û–±—â–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏** (–≤—Å–µ —Ç–æ–≤–∞—Ä—ã):
- ‚úÖ `views = 0` - –Ω–µ—Ç –ø–æ–∫–∞–∑–æ–≤ —Ä–µ–∫–ª–∞–º—ã
- ‚úÖ `clicks = 0` - –Ω–µ—Ç –∫–ª–∏–∫–æ–≤ –ø–æ —Ä–µ–∫–ª–∞–º–µ
- ‚úÖ `spend = 0‚ÇΩ` - –Ω–µ—Ç –ø—Ä—è–º—ã—Ö —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç
- ‚ùì `revenue > 0‚ÇΩ` - **–µ—Å—Ç—å –ø—Ä–æ–¥–∞–∂–∏ "–ò–∑ —Ä–µ–∫–ª–∞–º—ã"** (WB –∞—Ç—Ä–∏–±—É—Ç–∏—Ä—É–µ—Ç –∫ —Ä–µ–∫–ª–∞–º–µ)

**Backend –¥–∞–Ω–Ω—ã–µ** (excerpt from `/v1/analytics/advertising`):
```json
{
  "key": "sku:235269056",
  "label": "izo30white",
  "nmId": 235269056,
  "views": 0,
  "clicks": 0,
  "spend": 0,
  "revenue": 1113,
  "totalSales": 4524.24,
  "organicSales": 3411.24,
  "organicContribution": 75.4,
  "roas": null,
  "roi": null,
  "efficiency": {
    "status": "unknown",
    "recommendation": "No spend data available"
  }
}
```

---

## üí° –ë–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç: –°–∫–ª–µ–π–∫–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ (Card Linking)

### –ú–µ—Ö–∞–Ω–∏–∑–º —Å–∫–ª–µ–µ–∫ –Ω–∞ Wildberries

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –æ—Ç Product Owner**:

1. **–û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞** - –ø–æ–ª—É—á–∞–µ—Ç –≤–µ—Å—å —Ä–µ–∫–ª–∞–º–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ (spend > 0, views > 0, clicks > 0)
2. **–°–∫–ª–µ–π–∫–∞ (bundling)** - –æ—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –¥–æ—á–µ—Ä–Ω–∏–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏
3. **–ü–µ—Ä–µ—Ç–µ–∫–∞–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞** - –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç —Å –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–∞ —Å–∫–ª–µ–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
4. **–ê—Ç—Ä–∏–±—É—Ü–∏—è WB** - —Ä–µ–∫–ª–∞–º–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç Wildberries –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–æ–¥–∞–∂–∏ —Å–∫–ª–µ–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –∫–∞–∫ **—Ä–µ–∫–ª–∞–º–Ω—ã–µ**
5. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä—è–º—ã—Ö –∑–∞—Ç—Ä–∞—Ç** - —É —Å–∫–ª–µ–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ `spend = 0‚ÇΩ`, –Ω–æ `revenue > 0‚ÇΩ`

**–ü—Ä–∏–º–µ—Ä**:
```
ter-13-1 (–æ—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞)
‚îú‚îÄ –ó–∞—Ç—Ä–∞—Ç—ã: 11,337‚ÇΩ
‚îú‚îÄ –ö–ª–∏–∫–∏: 388
‚îú‚îÄ –ü—Ä–æ–¥–∞–∂–∏: 31,464‚ÇΩ
‚îî‚îÄ –°–∫–ª–µ–µ–Ω–∞ —Å:
   ‚îú‚îÄ ter-09 (spend: 0‚ÇΩ, revenue: 1,105‚ÇΩ) ‚Üê —Ç—Ä–∞—Ñ–∏–∫ –æ—Ç ter-13-1
   ‚îú‚îÄ ter-10 (spend: 0‚ÇΩ, revenue: 1,489‚ÇΩ) ‚Üê —Ç—Ä–∞—Ñ–∏–∫ –æ—Ç ter-13-1
   ‚îî‚îÄ ter-11 (spend: 0‚ÇΩ, revenue: 1,512‚ÇΩ) ‚Üê —Ç—Ä–∞—Ñ–∏–∫ –æ—Ç ter-13-1
```

---

## üéØ –ó–∞–ø—Ä–æ—Å –∫ Backend Team

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**1. –ì–¥–µ –≤ WB API —Ö—Ä–∞–Ω–∏—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∫–ª–µ–π–∫–∞—Ö?**
   - –ï—Å—Ç—å –ª–∏ –ø–æ–ª–µ/endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è parent-child —Å–≤—è–∑–µ–π –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏?
   - –ö–∞–∫–∏–µ nmId —è–≤–ª—è—é—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º–∏ (parent), –∞ –∫–∞–∫–∏–µ —Å–∫–ª–µ–µ–Ω–Ω—ã–º–∏ (child)?
   - –ö–∞–∫ WB API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö?

**2. –ö–∞–∫ WB –∞—Ç—Ä–∏–±—É—Ç–∏—Ä—É–µ—Ç –ø—Ä–æ–¥–∞–∂–∏ —Å–∫–ª–µ–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤?**
   - –ü–æ—á–µ–º—É `revenue > 0` –ø—Ä–∏ `spend = 0` –¥–ª—è —Å–∫–ª–µ–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤?
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–∏ WB attribution window (–æ–∫–Ω–æ –∞—Ç—Ä–∏–±—É—Ü–∏–∏)?
   - –ï—Å—Ç—å –ª–∏ –≤ API –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–º, –æ—Ç –∫–∞–∫–æ–π –∫–∞–º–ø–∞–Ω–∏–∏ –ø—Ä–∏—à–ª–∞ –ø—Ä–æ–¥–∞–∂–∞?

**3. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ä–µ–∫–ª–∞–º–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –º–µ–∂–¥—É —Å–∫–ª–µ–µ–Ω–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏?**
   - –î–æ–ª–∂–Ω—ã –ª–∏ –º—ã –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å `spend` –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–∞ —Å–∫–ª–µ–µ–Ω–Ω—ã–µ?
   - –ù–∞–ø—Ä–∏–º–µ—Ä: ter-13-1 spend=11,337‚ÇΩ ‚Üí —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–∞ ter-09/ter-10/ter-11 –ø–æ revenue?
   - –ò–ª–∏ WB —É–∂–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —ç—Ç–æ –≤ —Å–≤–æ–∏—Ö –º–µ—Ç—Ä–∏–∫–∞—Ö?

**4. –ö–∞–∫–∏–µ endpoints/fields –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?**
   - –ù—É–∂–µ–Ω –ª–∏ –Ω–æ–≤—ã–π endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è card linking –¥–∞–Ω–Ω—ã—Ö?
   - –ï—Å—Ç—å –ª–∏ –≤ —Ç–µ–∫—É—â–∏—Ö WB API –º–µ—Ç–æ–¥–∞—Ö (Promotion/Advertising) –ø–æ–ª—è –¥–ª—è parent/child —Å–≤—è–∑–µ–π?
   - –¢—Ä–µ–±—É–µ—Ç—Å—è –ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î (`adv_campaigns`, `adv_daily_stats`)?

---

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ Backend

### Database Schema

**–¢–∞–±–ª–∏—Ü–∞**: `adv_campaigns`
```prisma
model AdvCampaign {
  id          String   @id @default(uuid()) @db.Uuid
  cabinetId   String   @map("cabinet_id") @db.Uuid
  advertId    Int      @unique @map("advert_id")
  name        String   @db.VarChar(500)
  type        Int
  status      Int
  nmIds       Int[]    @map("nm_ids")  // ‚Üê –ú–∞—Å—Å–∏–≤ –∞—Ä—Ç–∏–∫—É–ª–æ–≤ –≤ –∫–∞–º–ø–∞–Ω–∏–∏
  // ‚ùå NO parent_nm_id field (–æ—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞)
  // ‚ùå NO linked_nm_ids field (—Å–∫–ª–µ–µ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏)
}
```

**–¢–∞–±–ª–∏—Ü–∞**: `adv_daily_stats`
```prisma
model AdvDailyStat {
  id         String   @id @default(uuid()) @db.Uuid
  cabinetId  String   @map("cabinet_id") @db.Uuid
  advertId   Int      @map("advert_id")
  date       DateTime @db.Date
  nmId       Int      @map("nm_id")  // ‚Üê –ê—Ä—Ç–∏–∫—É–ª —Ç–æ–≤–∞—Ä–∞
  views      Int      @default(0)
  clicks     Int      @default(0)
  orders     Int      @default(0)
  // ‚ùå NO parent_nm_id field
  // ‚ùå NO is_linked_product field (—Ñ–ª–∞–≥ —Å–∫–ª–µ–π–∫–∏)
}
```

### API Endpoints

**Current**: `GET /v1/analytics/advertising`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –∞—Ä—Ç–∏–∫—É–ª–∞–º (nmId)
- –ù–ï —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö/–¥–æ—á–µ—Ä–Ω–∏—Ö —Å–≤—è–∑—è—Ö

**WB SDK Methods** (daytona-wildberries-typescript-sdk):
- `getFullstats({ id, dates })` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞–º–ø–∞–Ω–∏–∏
- `getAuctionAdverts({ ids })` - –¥–µ—Ç–∞–ª–∏ –∫–∞–º–ø–∞–Ω–∏–π type 9
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –µ—Å—Ç—å –ª–∏ –º–µ—Ç–æ–¥—ã –¥–ª—è card linking?

---

## ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (MVP)

**Option 1: Metadata –≤ response** (–µ—Å–ª–∏ WB API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ)
```typescript
interface AdvertisingItem {
  sku_id: string
  spend: number
  revenue: number
  // NEW: Card linking metadata
  is_linked_product: boolean  // –§–ª–∞–≥ —Å–∫–ª–µ–µ–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
  parent_sku_id?: string       // –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ (–µ—Å–ª–∏ is_linked = true)
  linked_sku_ids?: string[]    // –°–∫–ª–µ–µ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ (–µ—Å–ª–∏ is_linked = false)
  attributed_from_parent?: boolean  // Revenue –∞—Ç—Ä–∏–±—É—Ç–∏—Ä–æ–≤–∞–Ω –æ—Ç parent
}
```

**Option 2: Distributed costs** (–µ—Å–ª–∏ WB –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç, —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å–∞–º–∏)
```typescript
// –ü—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞—Ç—Ä–∞—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
// ter-13-1: spend=11,337‚ÇΩ, revenue=31,464‚ÇΩ
// –†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–∞ —Å–∫–ª–µ–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã:
// - ter-09: spend = 11,337 * (1,105 / total_linked_revenue)
// - ter-10: spend = 11,337 * (1,489 / total_linked_revenue)
// - ter-11: spend = 11,337 * (1,512 / total_linked_revenue)
```

**Option 3: Hybrid approach**
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å original WB data as-is (spend=0 –¥–ª—è —Å–∫–ª–µ–µ–Ω–Ω—ã—Ö)
- –î–æ–±–∞–≤–∏—Ç—å computed field `adjusted_spend` —Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º–∏ –∑–∞—Ç—Ä–∞—Ç–∞–º–∏
- Frontend –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É "Original" –∏ "Adjusted" view

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (Future)

**Database Migration**:
```sql
ALTER TABLE adv_campaigns
ADD COLUMN parent_nm_id INTEGER,
ADD COLUMN linked_nm_ids INTEGER[];

ALTER TABLE adv_daily_stats
ADD COLUMN is_linked_product BOOLEAN DEFAULT false,
ADD COLUMN parent_nm_id INTEGER;
```

**New API Endpoint**:
```
GET /v1/analytics/advertising/card-linking
Response:
{
  "cards": [
    {
      "parent_nm_id": 270937054,  // ter-13-1
      "parent_name": "ter-13-1",
      "spend": 11337,
      "linked_products": [
        { "nm_id": 173588306, "name": "ter-09", "attributed_revenue": 1105 },
        { "nm_id": 173589306, "name": "ter-10", "attributed_revenue": 1489 },
        { "nm_id": 173589742, "name": "ter-11", "attributed_revenue": 1512 }
      ]
    }
  ]
}
```

---

## üìù Impact Analysis

### Frontend Changes Required

**If WB provides card linking data**:
- ‚úÖ Minimal changes - display metadata in UI
- Add tooltip: "üîó –°–∫–ª–µ–π–∫–∞ —Å {parent_name}"
- Show adjusted metrics with parent spend distribution

**If Backend calculates distribution**:
- ‚úÖ UI toggle: "Original WB data" vs "Adjusted (with distributed costs)"
- Update PerformanceMetricsTable to show both views
- Add explanation tooltip for users

### Current Workaround

**Until Backend implements card linking**:
- ‚úÖ Keep `status: "unknown"` for items with spend=0
- ‚úÖ Add tooltip explaining card linking:
  ```
  üîµ –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö
  –ù–µ—Ç –ø—Ä—è–º—ã—Ö —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç –≤ –ø–µ—Ä–∏–æ–¥–µ.
  –ü—Ä–æ–¥–∞–∂–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∞—Ç—Ä–∏–±—É—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ —Å–∫–ª–µ–π–∫–∏ —Å –¥—Ä—É–≥–∏–º–∏ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏.
  ```

---

## üîó Related Issues

- Epic 33: Advertising Analytics (Frontend)
- Request #76: Efficiency filter implementation
- Request #77: ROI calculation validation
- Request #79: Campaign placement field

---

## üìö Research Questions for Backend

1. **WB API Capabilities**:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Context7 –¥–ª—è `daytona-wildberries-typescript-sdk`:
     - –ï—Å—Ç—å –ª–∏ –º–µ—Ç–æ–¥—ã –¥–ª—è card linking?
     - –ö–∞–∫–∏–µ –ø–æ–ª—è –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ `getFullstats`/`getAuctionAdverts`?
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è WB: –µ—Å—Ç—å –ª–∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–æ —Å–∫–ª–µ–π–∫–∏?

2. **Attribution Logic**:
   - –ö–∞–∫ WB —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç revenue –¥–ª—è —Å–∫–ª–µ–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤?
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç –ª–∏ –æ–Ω–∏ last-click attribution?
   - –ï—Å—Ç—å –ª–∏ attribution window (7/14/30 –¥–Ω–µ–π)?

3. **Implementation Strategy**:
   - Store raw WB data as-is (no changes to current import)
   - Add computed fields for adjusted metrics
   - OR modify import to distribute costs during sync

---

## üöÄ Next Steps

**Backend Team**:
1. ‚úÖ –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å WB API –¥–ª—è card linking endpoints/fields
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ Context7: `daytona-wildberries-typescript-sdk` methods
3. ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (raw vs computed vs hybrid)
4. ‚úÖ –û—Ü–µ–Ω–∏—Ç—å effort –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (DB migration, API changes)

**Frontend Team** (waiting):
- ‚è≥ –û–∂–∏–¥–∞–µ–º –æ—Ç–≤–µ—Ç Backend –¥–ª—è –¥–∏–∑–∞–π–Ω–∞ UI
- ‚è≥ –í—Ä–µ–º–µ–Ω–Ω–æ: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö" —Å tooltip

---

## üìû Contact

**Prepared by**: Frontend Team (Claude Code Assistant)
**For questions**: Backend Team Lead
**Priority**: High (–±–ª–æ–∫–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ä–µ–∫–ª–∞–º—ã)

**Urgency**: –ë–µ–∑ –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å–∫–ª–µ–µ–∫ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å:
- ROAS (revenue / spend) - spend=0 –¥–ª—è —Å–∫–ª–µ–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
- ROI ((profit - spend) / spend) - division by zero
- –†–µ–∞–ª—å–Ω—É—é —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π
