# Epic 36 UI Mockup - Product Card Linking

**Date**: 2025-12-27
**Epic**: 36 - Product Card Linking (ÑĞºĞ»ĞµĞ¹ĞºĞ¸)
**Page**: Advertising Analytics

---

## ğŸ“ UI Layout Overview

This document provides visual mockups for Epic 36 UI changes to the advertising analytics page.

---

## ğŸ¨ Main Page - Before & After

### BEFORE (Epic 33 - Current State)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ½Ğ°Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°                                                      â”‚
â”‚                                                                          â”‚
â”‚ ĞŸĞµÑ€Ğ¸Ğ¾Ğ´: 2025-12-01 â€” 2025-12-21         [ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ] [Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ Summary Cards:                                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚ â”‚ Ğ Ğ°ÑÑ…Ğ¾Ğ´Ñ‹  â”‚ ĞŸÑ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸  â”‚   ROAS   â”‚   ROI    â”‚ ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹ â”‚               â”‚
â”‚ â”‚ 16,337â‚½  â”‚ 41,558â‚½  â”‚   2.54   â”‚   1.54   â”‚    5     â”‚               â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                          â”‚
â”‚ Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹: [Ğ’ÑĞµ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ â–¼] [Ğ’ÑĞµ ÑÑ‚Ğ°Ñ‚ÑƒÑÑ‹ â–¼] [ĞŸĞ¾Ğ¸ÑĞº...]                  â”‚
â”‚                                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ĞÑ€Ñ‚Ğ¸ĞºÑƒĞ»         Ğ Ğ°ÑÑ…Ğ¾Ğ´Ñ‹  ĞŸÑ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸   ROAS    ROI    Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ         â”‚  â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ â”‚ ter-13-1       11,337â‚½   31,464â‚½   2.78    1.78   âœ… Ğ ĞµĞ½Ñ‚Ğ°Ğ±ĞµĞ»ÑŒĞ½Ğ¾ â”‚  â”‚
â”‚ â”‚ izo30white      5,000â‚½    7,500â‚½   1.50    0.50   âœ… Ğ ĞµĞ½Ñ‚Ğ°Ğ±ĞµĞ»ÑŒĞ½Ğ¾ â”‚  â”‚
â”‚ â”‚ ter-09              0â‚½    1,105â‚½    â€”       â€”     ğŸ”µ ĞĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…   â”‚  â”‚ â† PROBLEM!
â”‚ â”‚ ter-10              0â‚½    1,489â‚½    â€”       â€”     ğŸ”µ ĞĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…   â”‚  â”‚ â† PROBLEM!
â”‚ â”‚ ter-20              0â‚½    5,433â‚½    â€”       â€”     ğŸ”µ ĞĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…   â”‚  â”‚ â† PROBLEM!
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â”‚ Showing 5 of 5 items                                    [1] 2 3 > Last  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Problem**: Products with `spend=0` but `revenue>0` show "ĞĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…" because ROAS/ROI cannot be calculated.

---

### AFTER (Epic 36 - With Card Linking)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ½Ğ°Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°                                     [ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ] [Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚]â”‚
â”‚                                                                          â”‚
â”‚ ĞŸĞµÑ€Ğ¸Ğ¾Ğ´: 2025-12-01 â€” 2025-12-21                                         â”‚
â”‚                                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â† NEW!                                   â”‚
â”‚ â”‚ [ĞŸĞ¾ Ğ°Ñ€Ñ‚Ğ¸ĞºÑƒĞ»Ğ°Ğ¼] [ĞŸĞ¾ ÑĞºĞ»ĞµĞ¹ĞºĞ°Ğ¼] â”‚  Toggle for grouping mode             â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ Summary Cards:                                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚ â”‚ Ğ Ğ°ÑÑ…Ğ¾Ğ´Ñ‹  â”‚ ĞŸÑ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸  â”‚   ROAS   â”‚   ROI    â”‚ ĞšĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹ â”‚               â”‚
â”‚ â”‚ 16,337â‚½  â”‚ 41,558â‚½  â”‚   2.54   â”‚   1.54   â”‚    5     â”‚               â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                          â”‚
â”‚ Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹: [Ğ’ÑĞµ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ â–¼] [Ğ’ÑĞµ ÑÑ‚Ğ°Ñ‚ÑƒÑÑ‹ â–¼] [ĞŸĞ¾Ğ¸ÑĞº...]                  â”‚
â”‚                                                                          â”‚
â”‚ Mode: ĞŸĞ¾ ÑĞºĞ»ĞµĞ¹ĞºĞ°Ğ¼ (2 Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹, 1 Ğ¸Ğ½Ğ´Ğ¸Ğ²Ğ¸Ğ´ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹)                         â”‚
â”‚                                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ĞÑ€Ñ‚Ğ¸ĞºÑƒĞ»         Ğ Ğ°ÑÑ…Ğ¾Ğ´Ñ‹  ĞŸÑ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸   ROAS    ROI    Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ         â”‚  â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ â”‚ Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ° #328632  11,337â‚½   34,058â‚½   3.00    2.00   âœ… Ğ ĞµĞ½Ñ‚Ğ°Ğ±ĞµĞ»ÑŒĞ½Ğ¾ â”‚  â”‚ â† SOLVED!
â”‚ â”‚ ğŸ”— Ğ¡ĞºĞ»ĞµĞ¹ĞºĞ° (3) â“˜                                                   â”‚  â”‚
â”‚ â”‚                                                                     â”‚  â”‚
â”‚ â”‚ izo30white       5,000â‚½    7,500â‚½   1.50    0.50   âœ… Ğ ĞµĞ½Ñ‚Ğ°Ğ±ĞµĞ»ÑŒĞ½Ğ¾ â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â”‚ Showing 2 of 2 items                                    [1] Last         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Solution**: Products are grouped by `imtId`, showing aggregated metrics with correct ROAS/ROI.

---

## ğŸ” Component Details

### 1. Group By Toggle (NEW)

**Location**: Top of page, next to date range picker

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°:                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ â”‚ ĞŸĞ¾ Ğ°Ñ€Ñ‚Ğ¸ĞºÑƒĞ»Ğ°Ğ¼ â”‚  â”‚ ĞŸĞ¾ ÑĞºĞ»ĞµĞ¹ĞºĞ°Ğ¼  â”‚        â”‚  â† Active state
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                   (highlighted)             â”‚
â”‚                                             â”‚
â”‚ ğŸ’¡ Ğ¡ĞºĞ»ĞµĞ¹ĞºĞ¸ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ÑÑÑ‚ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ          â”‚
â”‚    Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½Ñ‘Ğ½Ğ½Ñ‹Ñ… ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞµĞº Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**States**:
- **ĞŸĞ¾ Ğ°Ñ€Ñ‚Ğ¸ĞºÑƒĞ»Ğ°Ğ¼** (default): `group_by=sku` - Shows each nmId separately
- **ĞŸĞ¾ ÑĞºĞ»ĞµĞ¹ĞºĞ°Ğ¼**: `group_by=imtId` - Groups products with same imtId

**Implementation**:
```typescript
<div className="flex gap-2">
  <Button
    variant={groupBy === 'sku' ? 'default' : 'outline'}
    size="sm"
    onClick={() => setGroupBy('sku')}
  >
    ĞŸĞ¾ Ğ°Ñ€Ñ‚Ğ¸ĞºÑƒĞ»Ğ°Ğ¼
  </Button>
  <Button
    variant={groupBy === 'imtId' ? 'default' : 'outline'}
    size="sm"
    onClick={() => setGroupBy('imtId')}
  >
    ĞŸĞ¾ ÑĞºĞ»ĞµĞ¹ĞºĞ°Ğ¼
  </Button>
</div>
```

---

### 2. Merged Product Badge (NEW)

**Appearance**: Secondary badge with link icon

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ° #328632  ğŸ”— Ğ¡ĞºĞ»ĞµĞ¹ĞºĞ° (3) â“˜     â”‚  â† Hoverable badge
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Tooltip (on hover)**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ñ‘Ğ½Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° #328632                â”‚
â”‚                                              â”‚
â”‚ Ğ¢Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ² Ğ³Ñ€ÑƒĞ¿Ğ¿Ğµ:                             â”‚
â”‚  â€¢ ter-09 (#173588306)                       â”‚
â”‚  â€¢ ter-10 (#173589306)                       â”‚
â”‚  â€¢ ter-13-1 (#270937054)                     â”‚
â”‚                                              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚ ğŸ’¡ Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ½Ñ‹Ğµ Ğ·Ğ°Ñ‚Ñ€Ğ°Ñ‚Ñ‹ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸       â”‚
â”‚    Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ñ‹ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ²ÑĞµĞ¼Ğ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°Ğ¼Ğ¸ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Component Props**:
```typescript
<MergedProductBadge
  imtId={328632}
  mergedProducts={[
    { nmId: 173588306, vendorCode: 'ter-09' },
    { nmId: 173589306, vendorCode: 'ter-10' },
    { nmId: 270937054, vendorCode: 'ter-13-1' },
  ]}
/>
```

---

### 3. Table Row - Merged Group

**Layout**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ° #328632  ğŸ”— Ğ¡ĞºĞ»ĞµĞ¹ĞºĞ° (3) â“˜                                    â”‚
â”‚ 11,337â‚½         34,058â‚½         3.00         2.00    âœ… Ğ ĞµĞ½Ñ‚Ğ°Ğ±ĞµĞ»ÑŒĞ½Ğ¾ â”‚
â”‚                                                                      â”‚
â”‚ Metrics:                                                             â”‚
â”‚  â€¢ ĞŸĞ¾ĞºĞ°Ğ·Ñ‹: 6,200                                                     â”‚
â”‚  â€¢ ĞšĞ»Ğ¸ĞºĞ¸: 310                                                        â”‚
â”‚  â€¢ Ğ—Ğ°ĞºĞ°Ğ·Ñ‹: 13                                                        â”‚
â”‚  â€¢ CTR: 5.0%                                                         â”‚
â”‚  â€¢ CPC: 36.57â‚½                                                       â”‚
â”‚  â€¢ ĞšĞ¾Ğ½Ğ²ĞµÑ€ÑĞ¸Ñ: 4.19%                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Expandable Row (Future Enhancement - Optional)**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–¼ Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ° #328632  ğŸ”— Ğ¡ĞºĞ»ĞµĞ¹ĞºĞ° (3) â“˜                                  â”‚
â”‚ 11,337â‚½         34,058â‚½         3.00         2.00    âœ… Ğ ĞµĞ½Ñ‚Ğ°Ğ±ĞµĞ»ÑŒĞ½Ğ¾ â”‚
â”‚                                                                      â”‚
â”‚   â”œâ”€ ter-09        0â‚½           1,105â‚½       â€”         â€”             â”‚
â”‚   â”œâ”€ ter-10        0â‚½           1,489â‚½       â€”         â€”             â”‚
â”‚   â””â”€ ter-13-1    11,337â‚½       31,464â‚½      2.78       1.78         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Note**: Expandable rows are **optional** for MVP. Focus on merged group summary first.

---

### 4. Table Row - Individual Product

**Layout** (unchanged from Epic 33):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ izo30white                                                           â”‚
â”‚ 5,000â‚½          7,500â‚½          1.50         0.50    âœ… Ğ ĞµĞ½Ñ‚Ğ°Ğ±ĞµĞ»ÑŒĞ½Ğ¾ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Point**: Individual products (with `imtId=null`) display **exactly the same** as before Epic 36.

---

## ğŸ“± Responsive Behavior

### Desktop (â‰¥1024px)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ĞŸĞ¾ Ğ°Ñ€Ñ‚Ğ¸ĞºÑƒĞ»Ğ°Ğ¼] [ĞŸĞ¾ ÑĞºĞ»ĞµĞ¹ĞºĞ°Ğ¼]                     [ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ] [Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚]â”‚
â”‚                                                                      â”‚
â”‚ Table: Full width with all columns visible                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tablet (768px - 1023px)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ĞŸĞ¾ Ğ°Ñ€Ñ‚Ğ¸ĞºÑƒĞ»Ğ°Ğ¼] [ĞŸĞ¾ ÑĞºĞ»ĞµĞ¹ĞºĞ°Ğ¼]               â”‚
â”‚                                            â”‚
â”‚ Table: Horizontal scroll                   â”‚
â”‚ Badge: Abbreviated "ğŸ”— (3)"                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mobile (â‰¤767px)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ĞÑ€Ñ‚Ğ¸Ğº.] [Ğ¡ĞºĞ»ĞµĞ¹ĞºĞ¸]          â”‚
â”‚                             â”‚
â”‚ Card view instead of table: â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ° #328632        â”‚   â”‚
â”‚ â”‚ ğŸ”— (3)                â”‚   â”‚
â”‚ â”‚ Ğ Ğ°ÑÑ…Ğ¾Ğ´Ñ‹: 11,337â‚½      â”‚   â”‚
â”‚ â”‚ ROAS: 3.00            â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ­ State Transitions

### Toggle Animation

```
User clicks "ĞŸĞ¾ ÑĞºĞ»ĞµĞ¹ĞºĞ°Ğ¼"
        â†“
1. Button state changes (visual feedback)
        â†“
2. Loading spinner appears
        â†“
3. API request sent with group_by=imtId
        â†“
4. Table data updates (smooth fade transition)
        â†“
5. Badge components appear for merged groups
```

**Duration**: ~300-500ms (standard React Query refetch)

**Animation**:
- Button: Instant highlight (no delay)
- Table: 200ms fade-out â†’ data update â†’ 200ms fade-in
- Badge: Appears with parent row (no separate animation)

---

## ğŸ”” User Notifications

### Empty State (No Merged Groups)

**Scenario**: User selects "ĞŸĞ¾ ÑĞºĞ»ĞµĞ¹ĞºĞ°Ğ¼" but no products have `imtId` assigned.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ ĞµĞ¶Ğ¸Ğ¼: ĞŸĞ¾ ÑĞºĞ»ĞµĞ¹ĞºĞ°Ğ¼                           â”‚
â”‚                                              â”‚
â”‚ â„¹ï¸ ĞĞµÑ‚ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½Ñ‘Ğ½Ğ½Ñ‹Ñ… ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞµĞº                 â”‚
â”‚                                              â”‚
â”‚ Ğ’ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¼ ĞºĞ°Ğ±Ğ¸Ğ½ĞµÑ‚Ğµ Ğ½ĞµÑ‚ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² ÑĞ¾ ÑĞºĞ»ĞµĞ¹ĞºĞ°Ğ¼Ğ¸. â”‚
â”‚ Ğ’ÑĞµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ÑÑ‚ÑÑ Ğ¸Ğ½Ğ´Ğ¸Ğ²Ğ¸Ğ´ÑƒĞ°Ğ»ÑŒĞ½Ğ¾.       â”‚
â”‚                                              â”‚
â”‚ Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğº [ĞŸĞ¾ Ğ°Ñ€Ñ‚Ğ¸ĞºÑƒĞ»Ğ°Ğ¼]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### First-Time User Hint

**Scenario**: User's first visit to advertising analytics page after Epic 36 deployment.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ†• ĞĞ¾Ğ²Ğ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ: Ğ¡ĞºĞ»ĞµĞ¹ĞºĞ¸                    â”‚
â”‚                                              â”‚
â”‚ Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ²Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ    â”‚
â”‚ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½Ñ‘Ğ½Ğ½Ñ‹Ñ… ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞµĞº Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ½Ğ° WB.         â”‚
â”‚                                              â”‚
â”‚ [ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±Ğ¾Ğ²Ğ°Ñ‚ÑŒ] [ĞĞµ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ ÑĞ½Ğ¾Ğ²Ğ°]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation**: Use `localStorage` to track if user has seen the hint.

---

## ğŸ“Š Data Flow Diagram

```
User Action: Click "ĞŸĞ¾ ÑĞºĞ»ĞµĞ¹ĞºĞ°Ğ¼"
        â†“
State Update: setGroupBy('imtId')
        â†“
React Query: useAdvertisingAnalytics({ group_by: 'imtId' })
        â†“
API Client: GET /v1/analytics/advertising?group_by=imtId
        â†“
Backend: Returns merged groups + individuals
        â†“
Response Adapter: Maps backend camelCase to frontend snake_case
        â†“
Component Re-render:
  â”œâ”€ MergedProductBadge (for type='merged_group')
  â”œâ”€ Regular ProductRow (for type='individual')
  â””â”€ EfficiencyBadge (updated status)
```

---

## ğŸ¨ Color Scheme & Visual Design

### Badge Colors

**Merged Product Badge**:
- Background: `secondary` variant (gray-100 in light mode)
- Text: `secondary-foreground` (gray-700)
- Icon: ğŸ”— (Unicode link symbol)
- Hover: `secondary-hover` (gray-200)

**Efficiency Badge** (unchanged):
- Excellent: Green (`green-500`)
- Good: Blue (`blue-500`)
- Moderate: Yellow (`yellow-500`)
- Poor: Orange (`orange-500`)
- Loss: Red (`red-500`)
- Unknown: Gray (`gray-400`)

### Toggle Button States

**Active** (`variant="default"`):
- Background: `primary` (blue-600)
- Text: White
- Border: None

**Inactive** (`variant="outline"`):
- Background: Transparent
- Text: `foreground` (gray-700)
- Border: 1px solid `border` (gray-200)

---

## â™¿ Accessibility

### ARIA Labels

**Toggle Buttons**:
```html
<button
  aria-label="Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ¾ Ğ°Ñ€Ñ‚Ğ¸ĞºÑƒĞ»Ğ°Ğ¼"
  aria-pressed={groupBy === 'sku'}
>
  ĞŸĞ¾ Ğ°Ñ€Ñ‚Ğ¸ĞºÑƒĞ»Ğ°Ğ¼
</button>

<button
  aria-label="Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ¾ ÑĞºĞ»ĞµĞ¹ĞºĞ°Ğ¼"
  aria-pressed={groupBy === 'imtId'}
>
  ĞŸĞ¾ ÑĞºĞ»ĞµĞ¹ĞºĞ°Ğ¼
</button>
```

**Merged Badge**:
```html
<div
  role="button"
  aria-label="ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ñ‘Ğ½Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ñ 3 Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°Ğ¼Ğ¸. ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ¾ÑÑ‚ĞµĞ¹."
  tabindex="0"
>
  ğŸ”— Ğ¡ĞºĞ»ĞµĞ¹ĞºĞ° (3)
</div>
```

### Keyboard Navigation

- **Tab**: Navigate to toggle buttons
- **Space/Enter**: Activate toggle
- **Tab**: Navigate to badge
- **Space/Enter**: Open tooltip (or focus on first product link)
- **Esc**: Close tooltip

---

## ğŸ“ Copywriting (Russian)

### UI Labels

| English | Russian |
|---------|---------|
| Group By | Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° |
| By SKU | ĞŸĞ¾ Ğ°Ñ€Ñ‚Ğ¸ĞºÑƒĞ»Ğ°Ğ¼ |
| By Merged Cards | ĞŸĞ¾ ÑĞºĞ»ĞµĞ¹ĞºĞ°Ğ¼ |
| Merged Card | ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ñ‘Ğ½Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° |
| Group | Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ° |
| Products in group | Ğ¢Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ² Ğ³Ñ€ÑƒĞ¿Ğ¿Ğµ |
| No merged cards | ĞĞµÑ‚ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½Ñ‘Ğ½Ğ½Ñ‹Ñ… ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞµĞº |

### Tooltips

**Merged Badge**:
> ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ñ‘Ğ½Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° #{imtId}
>
> Ğ¢Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ² Ğ³Ñ€ÑƒĞ¿Ğ¿Ğµ:
> â€¢ {vendorCode} (#{nmId})
> â€¢ ...
>
> ğŸ’¡ Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ½Ñ‹Ğµ Ğ·Ğ°Ñ‚Ñ€Ğ°Ñ‚Ñ‹ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ñ‹ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ²ÑĞµĞ¼Ğ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°Ğ¼Ğ¸ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹

**Group By Info**:
> Ğ¡ĞºĞ»ĞµĞ¹ĞºĞ¸ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ÑÑÑ‚ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½Ñ‘Ğ½Ğ½Ñ‹Ñ… ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞµĞº Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ½Ğ° Wildberries

**Empty State**:
> Ğ’ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¼ ĞºĞ°Ğ±Ğ¸Ğ½ĞµÑ‚Ğµ Ğ½ĞµÑ‚ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² ÑĞ¾ ÑĞºĞ»ĞµĞ¹ĞºĞ°Ğ¼Ğ¸. Ğ’ÑĞµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ÑÑ‚ÑÑ Ğ¸Ğ½Ğ´Ğ¸Ğ²Ğ¸Ğ´ÑƒĞ°Ğ»ÑŒĞ½Ğ¾.

---

## ğŸ”— Related Mockups

- **Epic 33 UI**: `frontend/docs/wireframes/epic-33-advertising-analytics.md`
- **Epic 35 UI**: `frontend/docs/wireframes/epic-35-organic-split.md`

---

**Document Version**: 1.0
**Last Updated**: 2025-12-27
**Designer**: Auto-generated based on Epic 36 backend contract
